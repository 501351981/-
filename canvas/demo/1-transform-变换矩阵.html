<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>canvas变换：旋转、缩放、平移</title>
</head>
<body>
<style>
    #canvas{
        border: 1px solid #eee;
    }
</style>
<canvas id="canvas" width="300" height="300"></canvas>
<script>
    let ctx = document.getElementById('canvas').getContext('2d')
    ctx.fillStyle = '#f00'
    ctx.fillRect(100,100,100,100)
    console.log('没有转换时的矩阵', ctx.getTransform())

    ctx.save()
    ctx.translate(-30,-30)
    ctx.fillStyle = '#ff0'
    ctx.fillRect(100,100,100,100)
    console.log('平移时的矩阵', ctx.getTransform())
    ctx.restore()

    ctx.save()

    ctx.fillStyle = '#f0f'
    ctx.scale(1.5,1.5)
    ctx.fillRect(100,100,100,100)
    console.log('缩放时的矩阵', ctx.getTransform())
    ctx.restore()

    ctx.save()
    ctx.fillStyle = '#0ff'
    ctx.rotate(-Math.PI/4)
    ctx.fillRect(100,100,100,100)
    console.log('旋转时的矩阵', ctx.getTransform())
    ctx.restore()

    ctx.save()
    ctx.fillStyle = '#0ff'
    ctx.rotate(Math.PI/4)
    ctx.fillRect(100,100,100,100)
    console.log('旋转时的矩阵', ctx.getTransform())
    ctx.restore()

    ctx.save()
    ctx.setTransform(0.7071067811865476,-0.7071067811865475,0.7071067811865475,0.7071067811865476,0,0)
    ctx.fillStyle = '#9f9'
    ctx.fillRect(100,100,100,100)
    console.log('直接设置变换矩阵，覆盖了之前的图形')
    ctx.restore()

    ctx.save()
    ctx.fillStyle = '#a10f88'
    ctx.translate(30,30)
    ctx.rotate(Math.PI/4)
    ctx.fillRect(100,100,100,100)
    console.log('先平移后旋转时的矩阵', ctx.getTransform())
    ctx.restore()

    ctx.save()
    ctx.fillStyle = '#380fa1'
    ctx.rotate(Math.PI/4)
    ctx.translate(30,30)
    ctx.fillRect(50,50,100,100)
    console.log('先旋转后平移时的矩阵', ctx.getTransform())
    console.log('先旋转后平移 和 先平移后旋转的矩阵 不同')
    ctx.restore()
</script>
</body>
</html>
